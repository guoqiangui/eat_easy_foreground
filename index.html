<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
	<!-- 所有的超链接都在iframe中打开 -->
	<base target="display-page">
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/eat-easy-font.css">
	<link rel="stylesheet" href="css/index.css">
	<script src="js/lib/jquery-1.11.1.min.js"></script>
	<script src="js/tools_banner.js"></script>
</head>
<body>
	<!-- 要显示的页面 -->
	<div class="page">
		<!-- 默认显示主页 -->
		<iframe src="./main.html" frameborder="0" scrolling="no" name="display-page" id="display-page"></iframe>
	</div>
	<!-- 底部主菜单 -->
	<footer class="main-menu">
		<ul class="menu-list">
			<li>
				<a href="./main.html">
					<i class="icon icon-home active"></i>
					<span class="active">首页</span>
				</a>
			</li>
			<li>
				<a href="./find-not-vip.html" class="find">
					<i class="icon icon-find"></i>
					<span>发现</span>
				</a>
			</li>
			<li>
				<a href="./list.html">
					<i class="icon icon-list"></i>
					<span>清单</span>
				</a>
			</li>
			<li>
				<a href="./me.html">
					<i class="icon icon-user"></i>
					<span>我的</span>
				</a>
			</li>
		</ul>
	</footer>
</body>
</html>
<script>
	$(function () {
		// 绑定点击事件,点击后为图标和文字加上active类
		$(".main-menu ul li a").on("click", function () {
			// 先去掉其他的选项的active；使用end()返回上一个this
			$(".main-menu ul li a").children().removeClass("active");
			$(this).children().addClass("active");
		});
		
		// 通过给iframe绑定onload事件监听iframe页面的变化
		$("#display-page").on("load", function () {
			// 获取当前iframe页面的url
			var currentUrl = this.contentWindow.location.href;

			// 按照地址来重新绑定激活的菜单, 不匹配就不用变化
			if(currentUrl.indexOf("main") > 0) {
				$(".main-menu ul li a").children().removeClass("active");
				$(".main-menu ul li a:eq(0)").children().addClass("active");
			} else if(currentUrl.indexOf("find") > 0) {
				$(".main-menu ul li a").children().removeClass("active");
				$(".main-menu ul li a:eq(1)").children().addClass("active");
			} else if(currentUrl.indexOf("list") > 0) {
				$(".main-menu ul li a").children().removeClass("active");
				$(".main-menu ul li a:eq(2)").children().addClass("active");
			} else if(currentUrl.indexOf("me") > 0) {
				$(".main-menu ul li a").children().removeClass("active");
				$(".main-menu ul li a:eq(3)").children().addClass("active");
			}
		});
		
		// 如果点击了发现页面, 需要先确定是否已经登录了
		$(".menu-list .find").on("click", function () {
			var username = localStorage.getItem("username");
			
			if(username) {
				// 证明已登录, 继续判断用户是否为会员
				
				
			}
		});
	});
</script>
